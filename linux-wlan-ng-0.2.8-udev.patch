From 8eab668c6daf266a4f72e248170dc6c5c843ee23 Mon Sep 17 00:00:00 2001
From: unknown author <cooker@mandrivalinux.org>
Date: Wed, 3 Feb 2010 17:44:12 +0000
Subject: [PATCH 1/3] udev

---
 etc/udev/rules.d/40-prism2.rules |    2 +-
 etc/wlan/shared                  |    6 ------
 2 files changed, 1 insertions(+), 7 deletions(-)

diff --git a/etc/udev/rules.d/40-prism2.rules b/etc/udev/rules.d/40-prism2.rules
index cf40381..d62f68c 100644
--- a/etc/udev/rules.d/40-prism2.rules
+++ b/etc/udev/rules.d/40-prism2.rules
@@ -1 +1 @@
-ACTION=="add",BUS=="usb",DRIVER=="prism2_usb" ,RUN+="/etc/wlan/wlan-udev.sh %k"
+ENV{STARTUP}!="1", ACTION=="add",SUBSYSTEMS=="usb",DRIVER=="prism2_usb" ,RUN+="/etc/wlan/wlan-udev.sh %k"
diff --git a/etc/wlan/shared b/etc/wlan/shared
index 348b043..9ee72b4 100644
--- a/etc/wlan/shared
+++ b/etc/wlan/shared
@@ -74,14 +74,8 @@ fi
 #fi
 
 if [ ! -n "$WLAN_UDEV" ] ; then
-if [ -f /proc/sys/kernel/hotplug -a \
-	-x `cat /proc/sys/kernel/hotplug` -a \
-	-f /etc/hotplug/wlan.agent ] ; then
-	HAS_HOTPLUG=y
-else
 	HAS_HOTPLUG=n
 fi
-fi
 
 # Source the wlan configuration
 if [ -f /etc/wlan/wlan.conf ] ; then
-- 
1.6.6.1

